{% extends "template.html" %}

{% block head-css %}
    .splash-title {
        color: white;
        text-align: center;
        font-size: 20px;
        margin: 50px auto 50px auto;
    }
    .status-face {
        background-image: url("/static/img/blank-face2.png");
        background-repeat: no-repeat;
        background-size: 100%;
        width: 200px;
        height: 162px;
        margin-left: auto;
        margin-right: auto;
        margin-top: 120px;
        padding-bottom: 100px;
    }
    .status-face.occupied {
        background-size: 200px 162px;
    }
    .status-face.occupied-oversized {
        background-size: 200px 300px;
        margin-top: 0px;
        padding-bottom: 170px;
    }
    .emoji-outer-selection-box {
        width: 100%;
        overflow-x: scroll;
        height: 100px;
        position: fixed;
        bottom: 20px;
    }
    .emoji-selection-box {
        padding-top:15px;
        width: 600px;
        height: 50px;
    }
    .emoji-choice img {
        height: 40px;
        width: 46px;
    }
    .emoji-choice.oversized {
        margin-top: -5px;
    }
    .emoji-choice {
        float: left;
        margin-left: 10px;
        margin-right: 10px;
    }
    .emoji-choice.oversized img {
        height: 74.12px;
        width: 46px;
        margin-top: -15px;
    }
{% endblock %}


{% block head-js %}
    $(document).ready( function () {
        $(".emoji-choice").click(function() {
            if ($(this).is(".oversized")) {
                $(".status-face").css("background-image", 'url("' + $(this).find("img").attr("src") + '")')
                    .addClass("occupied-oversized").removeClass("occupied");
            } else {
                $(".status-face").css("background-image", 'url("' + $(this).find("img").attr("src") + '")')
                    .addClass("occupied").removeClass("occupied-oversized");
            }
            sendEmoji($(this).attr("id"));
        });
        
        $('.emoji-outer-selection-box').animate({
            scrollLeft: $(".emoji-choice:last-child").offset().left
         }, 20000, function() {
            console.log("complete");
            $(this).animate({
                scrollLeft: $(".emoji-selection-box").offset().left
            }, 20000);
        }).on('touchstart', function() {
            $(this).stop();
        });
    });
    
    function sendEmoji(id) {
        $.ajax({
            url: '/visualization/flumoji/sendEmoji',
            type: "POST",
            data: { access_token: "{{ token }}",
                       ds: "{{ uuid }}",
                       emoji: id
                   },
            dataType: "json",
            success: function(returnData) {
               
            }
        });
    }
{% endblock %}

{% block content %}
    <div class="splash-title">How are you feeling today?</div>
    
    <div class="status-face"></div>
    
    <div class="emoji-outer-selection-box">
        <div class="emoji-selection-box">
            <div class="emoji-choice" id="h">
                <img src="/static/img/emoji-happy.png" alt="">
            </div>
            <div class="emoji-choice oversized" id="u">
                <img src="/static/img/emoji-flu.png" alt="">
            </div>
            <div class="emoji-choice" id="r">
                <img src="/static/img/emoji-runnynose.png" alt="">
            </div>
            <div class="emoji-choice oversized" id="l">
                <img src="/static/img/emoji-chills.png" alt="">
            </div>
            <div class="emoji-choice" id="s">
                <img src="/static/img/emoji-sick.png" alt="">
            </div>
            <div class="emoji-choice oversized" id="f">
                <img src="/static/img/emoji-fever.png" alt="">
            </div>
            <div class="emoji-choice" id="c">
                <img src="/static/img/emoji-cough.png" alt="">
            </div>
            <div class="emoji-choice" id="y">
                <img src="/static/img/emoji-sleepy.png" alt="">
            </div>
            <div class="emoji-choice oversized" id="n">
                <img src="/static/img/emoji-nauseous.png" alt="">
            </div>
        </div>
    </div>
{% endblock %}